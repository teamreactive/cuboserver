<!DOCTYPE html>
<html ng-app="Comprador">
<head>
    <!-- Some JS scripts -->
    {% load staticfiles %}
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="{% static "usuarios/js/index-comprador.js" %}"></script>
    <title></title>
</head>
{% verbatim %}
<body ng-controller='mainTabController as mainTabCtrl'>

    <div id='menu' ng-controller='menuTabController as menuTabCtrl'>
        <ul>
            <li>
                <a href ng-click="menuTabCtrl.setTab(1)">Proveedores</a>
                    <ul ng-show='menuTabCtrl.isTab(1)'>
                        <li>
                            <a href ng-click="mainTabCtrl.setTab(1)">Nuevo Proveedor</a>
                        </li>
                        <li>
                            <a href ng-click="mainTabCtrl.setTab(2)">Actualizar Proveedor</a>
                        </li >
                    </ul>
            </li>
            <li>
                <a href ng-click="menuTabCtrl.setTab(2)">Contactos</a>
                    <ul ng-show='menuTabCtrl.isTab(2)'>
                        <li>
                            <a href ng-click="mainTabCtrl.setTab(3)">Nuevo Contacto</a>
                        </li>
                        <li>
                            <a href ng-click="mainTabCtrl.setTab(4)">Modificar Contacto</a>
                        </li >
                    </ul>
            </li>
            <li >
                <a href ng-click="mainTabCtrl.setTab(5) ; menuTabCtrl.setTab(0)">Solicitudes Pendientes</a>
            </li>
            <li >
                <a href ng-click="mainTabCtrl.setTab(6) ; menuTabCtrl.setTab(0)">Ordenes de Compra</a>
            </li>
            <li >
                <a href ng-click="mainTabCtrl.setTab(7) ; menuTabCtrl.setTab(0)">Realizar Cotizacion</a>
            </li>
            <li >
                <a href ng-click="mainTabCtrl.setTab(8) ; menuTabCtrl.setTab(0)">Ingresar Cotizacion</a>
            </li>
        </ul>
    </div>
    <div id='main' ng-controller='mainController as mainCtrl'>
        <h1>{{mainCtrl.i}}</h1>
        <div>
            <form name="crearProveedorForm" ng-show="mainTabCtrl.isTab(1)">
                <h4>Crear un nuevo proveedor</h4>
                <fieldset>
                    Razon social:<input ng-model="mainCtrl.crearProveedorForm.razon_social">
                </fieldset>
                <fieldset>
                    Sigla:<input ng-model="mainCtrl.crearProveedorForm.sigla">
                </fieldset>
                <fieldset>
                    NIT:<input ng-model="mainCtrl.crearProveedorForm.nit">
                </fieldset>
                <fieldset>
                    Numero de Verificacion:<input ng-model="mainCtrl.crearProveedorForm.numero_verificacion">
                </fieldset>
                <fieldset>
                    Lugar:<input ng-model="mainCtrl.crearProveedorForm.lugar">
                </fieldset>
                <fieldset>
                    Logo:<input ng-model="mainCtrl.crearProveedorForm.logo" type="file">
                </fieldset>
                <fieldset class="form-group">
                    <input type="submit"  value="crear proveedor" ng-click='mainCtrl.crearProveedor()'/>
                </fieldset>
            </form>
        </div>
        <div>
            <form name="actualizarProveedorForm" ng-show="mainTabCtrl.isTab(2)">
                <h4>Actualizar proveedor</h4>
                <fieldset>
                    <select ng-model='mainCtrl.actualizarProveedorForm.proveedor' ng-options="proveedor.razon_social for proveedor in mainCtrl.proveedores" ng-change='mainCtrl.getProveedor()'></select>
                </fieldset>
                <fieldset>
                    Razon Social:<input ng-model="mainCtrl.actualizarProveedorForm.razon_social"type="text" value="{{mainCtrl.actualizarProveedorForm.razon_social}}">
                </fieldset>
                <fieldset>
                    Sigla:<input type="text" value="{{mainCtrl.actualizarProveedorForm.sigla}}">
                </fieldset>
                <fieldset>
                    NIT:<input type="text" value="{{mainCtrl.actualizarProveedorForm.nit}}">
                </fieldset>
                <fieldset>
                    Direccion:<input type="text" value="{{mainCtrl.actualizarProveedorForm.lugar}}">
                </fieldset>
                <fieldset>
                    Logo:<input type="file">
                </fieldset>
                <fieldset>
                    <input type="submit" value="Actualizar" ng-click='mainCtrl.actualizarProveedor()'>
                </fieldset>
            </form>
        </div>
        <div>
            <form name='crearContactoForm' ng-show='mainTabCtrl.isTab(3)'>
                <h4>Crear Nuevo Contacto</h4>
                <fieldset>
                    <label for='nuevoContactoProveedor'>Proveedor</label>
                    <select ng-options='proveedor.razon_social for proveedor in mainCtrl.proveedores' id='nuevoContactoProveedor' ng-model="mainCtrl.crearContactoForm.proveedor"></select>
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoFamiliaProveedor'>Familia Proveedor</label>
                    <select id='nuevoContactoFamiliaProveedor' ng-options='familiaProveedor for familiaProveedor in mainCtrl.familiasProveedor' ng-model='mainCtrl.crearContactoForm.familiaProveedor'></select>
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoNombres'>Nombres</label>
                    <input id='nuevoContactoNombres' ng-model="mainCtrl.crearContactoForm.nombre">
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoApellidos'>Apellidos</label>
                    <input id='nuevoContactoApellidos' ng-model="mainCtrl.crearContactoForm.apellido">
                </fieldset>
                <fieldset>
                    <h3>Telefono Fijo</h3>
                    <label for='nuevoContactoExtension'>extension</label>
                    <input id='nuevoContactoExtension' ng-model="mainCtrl.crearContactoForm.extension">
                    <label for='nuevoContactoTelFijo'>numero</label>
                    <input id='nuevoContactoTelFijo' ng-model="mainCtrl.crearContactoForm.telefono_fijo">
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoCelular'>Celular</label>
                    <input id='nuevoContactoCelular' ng-model="mainCtrl.crearContactoForm.celular">
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoCorreo'>Correo</label>
                    <input id='nuevoContactoCorreo' ng-model="mainCtrl.crearContactoForm.correo">
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoCargo'>Cargo</label>
                    <input id='nuevoContactoCargo' ng-model="mainCtrl.crearContactoForm.cargo">
                </fieldset>
                <fieldset>
                    <label for='nuevoContactoPerfil'>Perfil</label>
                    <input id='nuevoContactoPerfil' ng-model="mainCtrl.crearContactoForm.perfil">
                </fieldset>
                <fieldset class="form-group">
                    <input type="submit"  value="crear contacto" ng-click='mainCtrl.crearContacto()'/>
                </fieldset>
            </form>
        </div>
        <div >
            <form name="actualizarContactoForm" ng-show='mainTabCtrl.isTab(4)'>
                <h4>Actualizar Contacto</h4>
                <fieldset>
                    <select ng-model='mainCtrl.actualizarContactoForm.contacto' ng-options='contacto.nombre for contacto in mainCtrl.contactos' ng-change='mainCtrl.getContacto()'></select>
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoProveedor'>Proveedor</label>
                    <select ng-options='proveedor.razon_social for proveedor in mainCtrl.proveedores' id='actualizarContactoProveedor' ng-model="mainCtrl.actualizarContactoForm.proveedor"></select>
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoFamiliaProveedor'>Familia Proveedor</label>
                    <select id='actualizarContactoFamiliaProveedor' ng-options='familiaProveedor for familiaProveedor in mainCtrl.familiasProveedor' ng-model='mainCtrl.actualizarContactoForm.familiaProveedor'></select>
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoNombres'>Nombres</label>
                    <input id='actualizarContactoNombres' ng-model="mainCtrl.actualizarContactoForm.nombre">
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoApellidos'>Apellidos</label>
                    <input id='actualizarContactoApellidos' ng-model="mainCtrl.actualizarContactoForm.apellido">
                </fieldset>
                <fieldset>
                    <h3>Telefono Fijo</h3>
                    <label for='actualizarContactoExtension'>extension</label>
                    <input id='actualizarContactoExtension' ng-model="mainCtrl.actualizarContactoForm.extension">
                    <label for='actualizarContactoTelFijo'>numero</label>
                    <input id='actualizarContactoTelFijo' ng-model="mainCtrl.actualizarContactoForm.telefono_fijo">
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoCelular'>Celular</label>
                    <input id='actualizarContactoCelular' ng-model="mainCtrl.actualizarContactoForm.celular">
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoCorreo'>Correo</label>
                    <input id='actualizarContactoCorreo' ng-model="mainCtrl.actualizarContactoForm.correo">
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoCargo'>Cargo</label>
                    <input id='actualizarContactoCargo' ng-model="mainCtrl.actualizarContactoForm.cargo">
                </fieldset>
                <fieldset>
                    <label for='actualizarContactoPerfil'>Perfil</label>
                    <input id='actualizarContactoPerfil' ng-model="mainCtrl.actualizarContactoForm.perfil">
                </fieldset>
                <fieldset class="form-group">
                    <input type="submit"  value="actualizar contacto" ng-click='mainCtrl.actualizarContacto()'/>
                </fieldset>
            </form>
        </div>
        <div id="solicitudes" ng-show="mainTabCtrl.isTab(5)">
            <h2>Solicitudes Pendientes</h2>
            <section id='solicitudes' ng-repeat='solicitud in mainCtrl.solicitudes'>
                <h3>Lugar</h3>
                <p>{{solicitud.lugar}}</p>
                <h3>Proyecto</h3>
                <p>{{solicitud.proyecto}}</p>
                <h3>Fecha</h3>
                <p>{{solicitud.fecha}}</p>
                <h3>Productos</h3>
                <div id="productos" ng-repeat='producto in solicitud.productos'>
                    <h4>nombre</h4>
                    <p>{{producto.nombre}}</p>
                </div>
                <button ng-click='mainTabCtrl.setTab(9); mainCtrl.setRealizarCotizacionXSolicitud(solicitud)'>realizar cotizacion</button>
            </section>
        </div>
        <div id="ordenesdecompra" ng-show="mainTabCtrl.isTab(6)">
            <h1>Ordenes de Compra!</h1>
        </div>
        <div id="cotizar" ng-show='mainTabCtrl.isTab(7)'>
            <h1>Realizar Cotizacion</h1>
            <form ng-controller='realizarCotizacionController as realizarCotizacionCtrl'>
                <fieldset class='form-group'>
                    <select ng-model='mainCtrl.realizarCotizacion.producto' ng-options="producto.nombre for producto in mainCtrl.productos"></select>
                </fieldset>
                <fieldset class='form-group'>
                    <select ng-model='mainCtrl.realizarCotizacion.unidad' ng-options="unidad for unidad in mainCtrl.realizarCotizacion.producto.unidades"></select>
                </fieldset>
                <fieldset class='form-group'>
                    <label for='realizarCotizacionSelectProveedor'>Insertar Proveedor</label>
                    <select id='realizarCotizacionSelectProveedor' ng-model='realizarCotizacionCtrl.proveedor' ng-options='proveedor.razon_social for proveedor in realizarCotizacionCtrl.proveedores' ng-change='realizarCotizacionCtrl.insertarProveedor(); mainCtrl.insertarProveedorRealizarCotizacion(realizarCotizacionCtrl.proveedor)'></select>
                </fieldset>
                <div ng-repeat='proveedor in mainCtrl.realizarCotizacion.proveedores'>
                    <fieldset>
                        <p>{{proveedor.razon_social}}</p>
                        <button ng-click='mainCtrl.quitarProveedorRealizarCotizacion(proveedor); realizarCotizacionCtrl.quitarProveedor(proveedor)'>quitar</button>
                    </fieldset>
                    
                </div>
                <fieldset>
                    <input type='submit' value='Realizar Cotizacion' ng-click='realizarCotizacionCtrl.clean(); mainCtrl.cleanRealizarCotizacion()'>
                </fieldset>
            </form>
        </div>
        <div id="ingresarcotizacion" ng-show='mainTabCtrl.isTab(8)'>
            <h1>Ingresar Cotizacion</h1>
        </div>
        <div id="realizarCotizacionXSolicitud" ng-show='mainTabCtrl.isTab(9)'>
            <section ng-repeat='cotizacion in mainCtrl.realizarCotizacionXSolicitud.cotizaciones'>
                <h2>{{cotizacion.nombre}}</h2>
                <h3>{{cotizacion.familiaProveedor}}</h3>
                <form>
                    <fieldset ng-repeat='contacto in cotizacion.contactos'>
                        <h4>{{contacto.proveedor.razon_social}}</h4>
                        <p>{{contacto.nombre}} {{contacto.apellido}}</p>
                        <button ng-click='mainCtrl.quitarContactoRealizarCotizacionXSolicitud(cotizacion,contacto)'>quitar contacto</button>
                    </fieldset>
                    <button ng-click='mainCtrl.quitarCotizacionRealizarCotizacionXSolicitud(cotizacion)'>realizar cotizacion</button>
                </form>
            </section>
        </div>
    </div>
</body>
{% endverbatim %}
</html>